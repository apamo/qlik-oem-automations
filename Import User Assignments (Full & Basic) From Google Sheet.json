{"blocks":[{"id":"5790BCB0-FDD8-4342-BE54-3F52133FCDAE","type":"StartBlock","disabled":false,"name":"Start","displayName":"Start","comment":"","childId":"D5784FB2-3C0F-412B-9E06-F4068C70D713","inputs":[{"id":"run_mode","value":"manual","type":"select","structure":{}}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-55,"y":-52},{"id":"CCFFE013-7611-42BA-B048-2CB0BCBE251B","type":"EndpointBlock","disabled":false,"name":"getDataFromSheet","displayName":"Google Sheets - Get Data From Sheet","comment":"Get Spreadsheet Id from URL path in browser","childId":null,"inputs":[{"id":"f667e670-ff32-11eb-8c82-d15203a11f4c","value":"{ $.spreadsheetId }","type":"string","structure":[]},{"id":"f6988040-ff32-11eb-b9bc-9b37a5308fa0","value":"{ $.sheetName }","type":"string","structure":[]},{"id":"f66ce1b0-ff32-11eb-ac14-0967c1e9ae39","value":"2","type":"string","structure":[]},{"id":"f67f11e0-ff32-11eb-90c7-b7d33889a6fa","value":"1000","type":"string","structure":[]},{"id":"f687eed0-ff32-11eb-8072-1960797e4c35","value":"A","type":"string","structure":[]},{"id":"f690b660-ff32-11eb-b3a8-0bd9dd3dd666","value":"E","type":"string","structure":[]}],"settings":[{"id":"datasource","value":"3f86e4a2-0310-4367-ac77-a1987dc33173","type":"select","structure":[]},{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":174,"y":440,"loopBlockId":"2DD29918-D871-4470-8ABE-F940E81AA836","datasourcetype_guid":"0d86f238-27c0-11ea-921c-022e6b5ea1e2","endpoint_guid":"f660e380-ff32-11eb-b118-bb9c886966ea","endpoint_role":"list"},{"id":"D5784FB2-3C0F-412B-9E06-F4068C70D713","type":"VariableBlock","disabled":false,"name":"sheetName","displayName":"Variable - sheetName","comment":"Set default Sheet Name","childId":"178D4413-9133-4A84-8A0B-A80B8A15B5C0","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-424,"y":165,"variableGuid":"8895E772-B505-4BB3-83F6-7C50CB8EB2BC","operations":[{"id":"set_value","key":"C0102130-93BD-48B8-8D2A-12B843302D17","name":"Set value of { variable }","value":"Hoja 1"}]},{"id":"178D4413-9133-4A84-8A0B-A80B8A15B5C0","type":"VariableBlock","disabled":false,"name":"spreadsheetId","displayName":"Variable - spreadsheetId","comment":"Get spreadsheet Id from URL path in browser","childId":"CCFFE013-7611-42BA-B048-2CB0BCBE251B","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-406,"y":266,"variableGuid":"271326FD-80F4-478A-A461-88F006AC784E","operations":[{"id":"set_value","key":"71227B01-70C1-4B9D-BD9A-87DFC3D8575A","name":"Set value of { variable }","value":"19QNtBCIQ-_wf4RJsCKF9D9pF1xKP-vKiWz_pT2sBND4"}]},{"id":"0E3271DA-6CFF-4183-8ACE-781F8555670C","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest","displayName":"Qlik Cloud Services - Raw API Request","comment":"Add assignment. If Professional then Full User, else Basic User","childId":null,"inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"licenses/assignments/actions/add","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"d8056ca0-2072-11ec-b110-cbae7b0a483b","type":"select","displayValue":"POST","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":"{\n  \"add\": [\n    {\n      \"subject\": \"{ $.getDataFromSheet.item[3] }\",\n      \"type\": \"{ if: { $.getDataFromSheet.item[4] } = 'professional', 'fullUser', 'basicUser' }\"\n    }\n  ]\n}","type":"object","mode":"raw","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":null,"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":363,"y":722,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"get"},{"id":"2DD29918-D871-4470-8ABE-F940E81AA836","type":"EndpointBlock","disabled":false,"name":"listUsers","displayName":"Qlik Cloud Services - List Users","comment":"Get list of users in current tenant","childId":null,"inputs":[],"settings":[{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-437,"y":306,"loopBlockId":"E66A7C4F-5751-4B28-A278-8DCD5F1C8B35","datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"53ca52b0-6f83-11eb-b06c-c5bdc3525ce4","endpoint_role":"list"},{"id":"E66A7C4F-5751-4B28-A278-8DCD5F1C8B35","type":"IfElseBlock","disabled":false,"name":"condition","displayName":"Condition","comment":"If user subject exists in tenant then add license assignment","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ uppercase: {$.getDataFromSheet.item[3]} }","input2":"{ uppercase: {$.listUsers.item.subject} }","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":-430,"y":583,"childTrueId":"0E3271DA-6CFF-4183-8ACE-781F8555670C","childFalseId":null}],"variables":[{"guid":"8895E772-B505-4BB3-83F6-7C50CB8EB2BC","name":"sheetName","type":"string"},{"guid":"271326FD-80F4-478A-A461-88F006AC784E","name":"spreadsheetId","type":"string"}]}