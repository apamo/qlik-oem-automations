{"blocks":[{"id":"E5618D22-2A3A-4043-85F8-09DDFFC9758B","type":"StartBlock","disabled":false,"name":"Start","displayName":"Start","comment":"","childId":"A38F217C-7C00-424C-B7B0-ACADE5CB7DA7","inputs":[{"id":"run_mode","value":"manual","type":"select","structure":{}}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":0},{"id":"265221AE-30BF-4871-B259-97F9BCAADEA5","type":"EndpointBlock","disabled":false,"name":"ListAnalyticsDataConnections","displayName":"Qlik Platform Operations - List Analytics Data Connections","comment":"Fetch all data connections in source tenant","childId":"9AE421F6-56A8-49AD-B344-FE9E35011495","inputs":[{"id":"8adf5d40-ce38-11ed-9a06-d1c545d3551c","value":"{$.sourceTenant}","type":"string","structure":[]},{"id":"57099e30-d912-11ed-a2a7-af3e440df542","value":null,"type":"string","structure":[]},{"id":"b8811980-d4aa-11ee-acfa-f5aad0dfefc5","value":null,"type":"select","structure":[]},{"id":"e6a52ea0-d4aa-11ee-8076-bd598be61128","value":null,"type":"select","structure":[]},{"id":"09faa860-d4ab-11ee-bbe2-fdb4465a50d8","value":null,"type":"string","structure":[]},{"id":"1ad40f40-d4ab-11ee-8f74-67285123f24a","value":null,"type":"select","structure":[]},{"id":"7aeba3a0-d4ab-11ee-b3fb-8da64e599e8c","value":null,"type":"select","structure":[]},{"id":"92386040-d4ab-11ee-8c5b-b5e7c44e6de1","value":null,"type":"string","structure":[]},{"id":"aa76a010-d4ab-11ee-9048-cfcc20f590ad","value":null,"type":"select","structure":[]},{"id":"bb611d70-d4ac-11ee-8745-3b56fe623b7f","value":null,"type":"string","structure":[]}],"settings":[{"id":"datasource","value":"befef720-6e87-11ee-a9cf-97c836b3c6f3","type":"select","structure":[]},{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":527,"y":335,"datasourcetype_guid":"c7e48240-e0f2-11ec-ada1-d5ef75014b77","endpoint_guid":"8accd9c0-ce38-11ed-a5b4-974f79a4f39f","endpoint_role":"list"},{"id":"9AE421F6-56A8-49AD-B344-FE9E35011495","type":"FilterListBlock","disabled":false,"name":"filterList","displayName":"Filter over Qlik Platform Operations - List Analytics Data Connections - Filter List","comment":"Remove DataFiles connections from the list","childId":null,"inputs":[{"id":"list","value":"{ $.ListAnalyticsDataConnections }","type":"string","structure":[]},{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"datasourceID","input2":"DataFiles","operator":"doesntContain"}]},"type":"custom","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":658,"y":431,"loopBlockId":"76D343C6-8AE1-4B27-9CE2-62C80A2E9788"},{"id":"75D149BA-D24D-4D60-A74D-DE229FAF3EC2","type":"EndpointBlock","disabled":false,"name":"CreateAnalyticsDataConnection","displayName":"Qlik Platform Operations - Create Analytics Data Connection","comment":"","childId":"60C58D9A-89B8-4AD5-B381-1C1CE877AAE3","inputs":[{"id":"4c0ab960-d6de-11ee-8d82-4942a223c1bb","value":"{$.targetTenant}","type":"string","structure":[]},{"id":"9d78cac0-d6df-11ee-9df0-bdc8c8cf0c37","value":"{$.filterList.item.qName}","type":"string","structure":[]},{"id":"d6e56fa0-d6df-11ee-848e-91feaabc3a5c","value":"{$.filterList.item.datasourceID}","type":"string","structure":[]},{"id":"f4971ca0-d6df-11ee-934c-251b0309fb36","value":"{$.connectionProps}","type":"string","structure":[]},{"id":"a70a54e0-d6df-11ee-9f52-c9cf0415b92e","value":"{$.spaceId}","type":"string","structure":[]},{"id":"c2fe0120-d6df-11ee-95e7-5deb95ee9665","value":null,"type":"select","structure":[]},{"id":"6bc304e0-d6e7-11ee-91f4-d9e1a547e378","value":null,"type":"string","structure":[]}],"settings":[{"id":"datasource","value":"befef720-6e87-11ee-a9cf-97c836b3c6f3","type":"select","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":275,"y":1096,"datasourcetype_guid":"c7e48240-e0f2-11ec-ada1-d5ef75014b77","endpoint_guid":"4bf2fbe0-d6de-11ee-bb93-8515374f2012","endpoint_role":"create"},{"id":"A38F217C-7C00-424C-B7B0-ACADE5CB7DA7","type":"VariableBlock","disabled":false,"name":"sourceTenant","displayName":"Variable - sourceTenant","comment":"","childId":"F3D01C84-3B2B-4D2B-B556-658DB75E3E24","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-314,"y":226,"variableGuid":"B40370DA-34E3-4918-BBB3-804DCBE2F062","operations":[{"id":"empty","key":"AFF2CA41-074B-4075-A96D-BEE504AAA4CA","name":"Empty { variable }"},{"id":"set_value","key":"29415BD8-4D9E-476B-96FB-46F9897D3364","name":"Set value of { variable }","value":"oem-data-capacity.de.qlikcloud.com"}]},{"id":"F3D01C84-3B2B-4D2B-B556-658DB75E3E24","type":"VariableBlock","disabled":false,"name":"targetTenant","displayName":"Variable - targetTenant","comment":"","childId":"DD800C31-E825-4A10-8932-20B21DA259F9","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-325,"y":218,"variableGuid":"BBA930C5-D1AB-4717-8192-351EDBB5BB3D","operations":[{"id":"empty","key":"E8DB1CB0-5F61-4F88-8E64-8DE253B6AF75","name":"Empty { variable }"},{"id":"set_value","key":"5F83B03C-4F05-47D8-AEF1-95C7B8FA5CCF","name":"Set value of { variable }","value":"oem-data-capacity2.de.qlikcloud.com"}]},{"id":"76D343C6-8AE1-4B27-9CE2-62C80A2E9788","type":"EndpointBlock","disabled":false,"name":"GetAnalyticsDataConnection","displayName":"Qlik Platform Operations - Get Analytics Data Connection","comment":"Get all connection properties except credentials","childId":"5AB62652-5889-48D1-8E25-2459F50799C3","inputs":[{"id":"1050de40-d4ad-11ee-8fc9-390eb6d933db","value":"{$.sourceTenant}","type":"string","structure":[]},{"id":"10568a80-d4ad-11ee-b982-c1eaaea3cc19","value":"{$.filterList.item.qID}","type":"string","structure":[]},{"id":"4cf2cc60-d4ad-11ee-aba7-c7b149db62a2","value":null,"type":"select","structure":[]},{"id":"1809a1e0-d4ae-11ee-b4d4-4fef7f0d80cf","value":null,"type":"select","structure":[]},{"id":"345ba050-d4ae-11ee-ba29-fde34840f9ab","value":null,"type":"string","structure":[]},{"id":"45769260-d4ae-11ee-83df-5b1350386e94","value":null,"type":"select","structure":[]},{"id":"598aee40-d4ae-11ee-be8c-ab7071ef0b1f","value":null,"type":"string","structure":[]},{"id":"71a41ef0-d4ae-11ee-b6be-712a492bb2b3","value":null,"type":"select","structure":[]},{"id":"8d71cd40-d4ae-11ee-b85e-f725cc6a4898","value":null,"type":"select","structure":[]}],"settings":[{"id":"datasource","value":"befef720-6e87-11ee-a9cf-97c836b3c6f3","type":"select","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":445,"y":1099,"datasourcetype_guid":"c7e48240-e0f2-11ec-ada1-d5ef75014b77","endpoint_guid":"103de9e0-d4ad-11ee-8860-0911bf74cdab","endpoint_role":"get"},{"id":"5AB62652-5889-48D1-8E25-2459F50799C3","type":"CaseBlock","disabled":false,"name":"case","displayName":"Case","comment":"Case by Connection Type","childId":"75D149BA-D24D-4D60-A74D-DE229FAF3EC2","inputs":[{"id":"expression","value":"{$.filterList.item.datasourceID}","type":"string","structure":[]},{"id":"statements","value":["mssql","File_AmazonS3ConnectorV2","DG_mssql","rest"],"type":"list","mode":"keyValue","structure":[]}],"settings":[],"collapsed":[{"name":"default","isCollapsed":true}],"x":635,"y":712,"statementChildrenIds":["DAEC5254-29DC-45CC-8612-1972DA6BBC20","82271E1E-188A-41FF-BA87-177AA2504347","A57D5F1C-3D63-4F22-A28B-EDEB8C613185","45A89BD8-170E-4DBF-ABEA-4931CBC0FFA0"],"defaultChildId":null},{"id":"DD800C31-E825-4A10-8932-20B21DA259F9","type":"VariableBlock","disabled":false,"name":"connectionProps","displayName":"Variable - connectionProps","comment":"","childId":"086D63F3-3CE8-446D-B251-28F84488CA75","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-304,"y":418,"variableGuid":"3C0E4300-74AA-493F-BFF7-CA520B884425","operations":[{"id":"empty","key":"4B1F2AD3-65B0-4DD4-BE7A-AC4354C5A6C2","name":"Empty { variable }"}]},{"id":"086D63F3-3CE8-446D-B251-28F84488CA75","type":"VariableBlock","disabled":false,"name":"spaceId","displayName":"Variable - spaceId","comment":"","childId":"265221AE-30BF-4871-B259-97F9BCAADEA5","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-320,"y":413,"variableGuid":"1DB0865D-FA54-438E-94D4-DDB39F6BCE4E","operations":[{"id":"empty","key":"8846DCA8-C3E3-4B10-8650-F8AE735C0A48","name":"Empty { variable }"},{"id":"set_value","key":"C0DDB061-7335-4743-BA1A-37ACA9F583E9","name":"Set value of { variable }","value":"660ea0bf6716771383eb4ff0"}]},{"id":"60C58D9A-89B8-4AD5-B381-1C1CE877AAE3","type":"ShowBlock","disabled":false,"name":"output","displayName":"Output","comment":"","childId":null,"inputs":[{"id":"input","value":"{$.connectionProps}","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":52,"y":1308},{"id":"DAEC5254-29DC-45CC-8612-1972DA6BBC20","type":"VariableBlock","disabled":false,"name":"connectionProps","displayName":"Variable - connectionProps","comment":"Set connection properties for MSSQL server","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":567,"y":980,"variableGuid":"3C0E4300-74AA-493F-BFF7-CA520B884425","operations":[{"id":"set_value","key":"F47540D8-87D1-4886-BE33-C1DD13690BC1","name":"Set value of { variable }","value":"{\n\"dataSourceId\": \"{$.GetAnalyticsDataConnection.datasourceID}\",\n\"qName\": \"{$.GetAnalyticsDataConnection.qName}\",\n\"space\": \"{$.spaceId}\",\n\"connectionProperties\": {\n\"host\": \"{$.GetAnalyticsDataConnection.connectionProperties.host}\",\n\"port\": \"{$.GetAnalyticsDataConnection.connectionProperties.port}\",\n\"database\": \"{$.GetAnalyticsDataConnection.connectionProperties.database}\",\n\"username\": \"<USERNAME>\",\n\"password\": \"<PASSWORD>\"\n}\n}"}]},{"id":"82271E1E-188A-41FF-BA87-177AA2504347","type":"VariableBlock","disabled":false,"name":"connectionProps","displayName":"Variable - connectionProps","comment":"Set connection properties for AWS S3","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":577,"y":1140,"variableGuid":"3C0E4300-74AA-493F-BFF7-CA520B884425","operations":[{"id":"set_value","key":"E091909C-56A3-4130-8550-DFD7B8431C15","name":"Set value of { variable }","value":"{\n\"dataSourceId\": \"{$.GetAnalyticsDataConnection.datasourceID}\",\n\"qName\": \"{$.GetAnalyticsDataConnection.qName}\",\n\"space\": \"{$.spaceId}\",\n\"connectionProperties\": {\n\"accessKey\": \"<CLIENT_ID>\",\n\"secretKey\": \"<CLIENT_SECRET>\",\n\"region\": \"{$.GetAnalyticsDataConnection.connectionProperties.region}\",\n\"bucketName\": \"{$.GetAnalyticsDataConnection.connectionProperties.bucketName}\"\n}\n}"}]},{"id":"A57D5F1C-3D63-4F22-A28B-EDEB8C613185","type":"VariableBlock","disabled":false,"name":"connectionProps","displayName":"Variable - connectionProps","comment":"Set connection properties for MSSQL server (Gateway)","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":643,"y":1387,"variableGuid":"3C0E4300-74AA-493F-BFF7-CA520B884425","operations":[{"id":"set_value","key":"2D072198-7377-4D4C-9183-8F068E3FD6B5","name":"Set value of { variable }","value":"{\n\"dataSourceId\": \"DG_mssql\",\n\"qName\": \"{$.GetAnalyticsDataConnection.qName}\",\n\"space\": \"{$.spaceId}\",\n\"connectionProperties\": {\n\"gatewayInstance\": \"<GATEWAY_ID>\",\n\"host\": \"{$.GetAnalyticsDataConnection.connectionProperties.host}\",\n\"port\": \"{$.GetAnalyticsDataConnection.connectionProperties.port}\",\n\"database\": \"<DATABASE_NAME>\",\n\"username\": \"<USERNAME>\",\n\"password\": \"<PASSWORD>\"\n}\n}"}]},{"id":"FCBA3940-CA41-4102-8AFF-EBCF19C3F130","type":"VariableBlock","disabled":false,"name":"connectionProps","displayName":"Variable - connectionProps","comment":"Set connection properties for REST with Query Headers","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":748,"y":1093,"variableGuid":"3C0E4300-74AA-493F-BFF7-CA520B884425","operations":[{"id":"set_value","key":"E5BBC227-C1F6-4CE2-87E5-6D450F86C424","name":"Set value of { variable }","value":"{\n\"dataSourceId\": \"{$.GetAnalyticsDataConnection.datasourceID}\",\n\"qName\": \"{$.GetAnalyticsDataConnection.qName}\",\n\"space\": \"{$.spaceId}\",\n\"connectionProperties\": {\n\"url\": \"{$.GetAnalyticsDataConnection.connectionProperties.url}\",\n\"queryHeaders\": [\n{\n\"name\": \"X-AppSecretToken\",\n\"value\": \"demo\",\n\"encrypt\": \"false\"\n},\n{\n\"name\": \"X-AgreementGrantToken\",\n\"value\": \"demo\",\n\"encrypt\": \"false\"\n}\n],\n\"allowWithConnection\": \"true\"\n}\n}"}]},{"id":"45A89BD8-170E-4DBF-ABEA-4931CBC0FFA0","type":"CaseBlock","disabled":false,"name":"case2","displayName":"Case 2","comment":"If REST then by Connection Name on Source Tenant","childId":null,"inputs":[{"id":"expression","value":"{$.filterList.item.qName}","type":"string","structure":[]},{"id":"statements","value":["Generic_REST","E-conomic REST API (Accounts)"],"type":"list","mode":"keyValue","structure":[]}],"settings":[],"collapsed":[{"name":"default","isCollapsed":true}],"x":806,"y":1072,"statementChildrenIds":["DA72B960-BBB8-4333-B051-A804D1766B1A","FCBA3940-CA41-4102-8AFF-EBCF19C3F130"],"defaultChildId":null},{"id":"DA72B960-BBB8-4333-B051-A804D1766B1A","type":"VariableBlock","disabled":false,"name":"connectionProps","displayName":"Variable - connectionProps","comment":"Set connection properties for REST","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":752,"y":921,"variableGuid":"3C0E4300-74AA-493F-BFF7-CA520B884425","operations":[{"id":"set_value","key":"E3220CD9-0324-4415-9BC9-4F19902A87B1","name":"Set value of { variable }","value":"{\n\"dataSourceId\": \"{$.GetAnalyticsDataConnection.datasourceID}\",\n\"qName\": \"{$.GetAnalyticsDataConnection.qName}\",\n\"space\": \"{$.spaceId}\",\n\"connectionProperties\": {\n\"url\": \"{$.GetAnalyticsDataConnection.connectionProperties.url}\"\n}\n}"}]}],"variables":[{"guid":"B40370DA-34E3-4918-BBB3-804DCBE2F062","name":"sourceTenant","type":"string"},{"guid":"BBA930C5-D1AB-4717-8192-351EDBB5BB3D","name":"targetTenant","type":"string"},{"guid":"1DB0865D-FA54-438E-94D4-DDB39F6BCE4E","name":"spaceId","type":"string"},{"guid":"3C0E4300-74AA-493F-BFF7-CA520B884425","name":"connectionProps","type":"string"}]}