{"blocks":[{"id":"F8CC9315-68E2-44A6-A47F-0D59930FED4F","type":"StartBlock","disabled":false,"name":"Start","displayName":"Start","comment":"","childId":"C18FB176-2110-4425-B504-D6E6B66CFDC1","inputs":[{"id":"run_mode","value":"manual","type":"select","structure":{}}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-525,"y":65},{"id":"EA8F6076-A10A-4673-AEBB-FBDD8D777B7F","type":"VariableBlock","disabled":false,"name":"sharedSpaceName","displayName":"Variable - sharedSpaceName","comment":"Name of the shared space on the source tenant","childId":"E7835688-6B35-4301-800C-EF2305F24176","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-26,"y":286,"variableGuid":"FCE8143B-38AC-405D-8326-0E11AD08AF36","operations":[{"id":"set_value","key":"DB079338-34BF-449C-B875-253F9FC744AB","name":"Set value of { variable }","value":"Staging"}]},{"id":"E7835688-6B35-4301-800C-EF2305F24176","type":"EndpointBlock","disabled":false,"name":"listSpaces","displayName":"Qlik Platform Operations - List Spaces","comment":"Retrieve shared space details from the source tenant","childId":"0B56904B-F3BE-46E4-9BF3-F2DBADAA5271","inputs":[{"id":"7717d000-eb0e-11ec-9b55-c70a3d793cb2","value":"{ $.inputs.'Target Tenant URL' }","type":"string","structure":[]},{"id":"cf8b5510-d90e-11ed-a579-cd38900fbf47","value":"name eq \"{$.sharedSpaceName}\"","type":"string","structure":[]},{"id":"1d91e290-d90f-11ed-80ea-9fec14e6d987","value":null,"type":"string","structure":[]},{"id":"71ea7180-d90f-11ed-a399-43da6346f683","value":"shared","type":"select","structure":[]},{"id":"92cd6110-d90f-11ed-a57c-89623b3170d1","value":null,"type":"string","structure":[]}],"settings":[{"id":"datasource","value":"362c212a-10ba-4864-b435-14a6fca80512","type":"select","structure":[]},{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":-525,"y":545,"loopBlockId":null,"datasourcetype_guid":"c7e48240-e0f2-11ec-ada1-d5ef75014b77","endpoint_guid":"76df5d40-eb0e-11ec-85e6-6fa92818449e","endpoint_role":"list"},{"id":"EB5C8EA7-07C6-4ED9-B3B1-735F9539ED6F","type":"SnippetBlock","disabled":false,"name":"ExportAppToBase64EncodedFile","displayName":"Qlik Platform Operations - Export App To Base 64 Encoded File","comment":"Download Qlik Sense app from the source tenant","childId":"A09BC0CF-38A9-4955-A333-4985625A958B","inputs":[{"id":"d426c290-9af1-11ed-9b71-c99af7f97e39","value":"{ $.inputs.'Source Tenant URL' }","type":"string","structure":[]},{"id":"ca854070-fc5a-11ec-8017-27122a46811b","value":"{ $.loop.item }","type":"string","structure":[]},{"id":"6251d660-ca35-11ed-be4b-a5921229ac8e","value":"true","type":"select","displayValue":"true","structure":[]}],"settings":[{"id":"datasource","value":"362c212a-10ba-4864-b435-14a6fca80512","type":"select","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-298,"y":1037,"datasourcetype_guid":"c7e48240-e0f2-11ec-ada1-d5ef75014b77","snippet_guid":"ca7c1640-fc5a-11ec-9506-815ae94ddd6e"},{"id":"A09BC0CF-38A9-4955-A333-4985625A958B","type":"EndpointBlock","disabled":false,"name":"importAppFromBase64EncodedFile","displayName":"Qlik Platform Operations - Import App From Base 64 Encoded File","comment":"Upload Qlik Sense app to the new target tenant","childId":"8082D022-543C-40D0-90A6-E06CED653D17","inputs":[{"id":"4be04370-fc5b-11ec-8758-ddba95fb24da","value":"{ $.inputs.'Target Tenant URL' }","type":"string","structure":[]},{"id":"4bce30a0-fc5b-11ec-ab0b-cb01fdfeeec0","value":"{$.ExportAppToBase64EncodedFile}","type":"string","structure":[]},{"id":"a7fab740-fc5b-11ec-9e27-8d6654541393","value":null,"type":"string","structure":[]},{"id":"cfd90fa0-fc5b-11ec-81c3-ef55794fd2e8","value":"{ $.listSpaces[0].id }","type":"string","structure":[]}],"settings":[{"id":"datasource","value":"362c212a-10ba-4864-b435-14a6fca80512","type":"select","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":95,"y":1538,"datasourcetype_guid":"c7e48240-e0f2-11ec-ada1-d5ef75014b77","endpoint_guid":"4bbfdf70-fc5b-11ec-b1c1-311f2248f446","endpoint_role":"create"},{"id":"C18FB176-2110-4425-B504-D6E6B66CFDC1","type":"FormBlock","disabled":false,"name":"inputs","displayName":"Inputs","comment":"Get the source tenant URL dedicated to orchestration and the target tenant URL created in the previous automation step","childId":"EA8F6076-A10A-4673-AEBB-FBDD8D777B7F","inputs":[],"settings":[{"id":"persist_data","value":"no","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-93,"y":204,"form":[{"id":"inputs-input-0","type":"input","label":"Source Tenant URL","order":0,"values":null,"options":[],"helpText":"<TENANT_NAME>.<TENANT_REGION>.qlikcloud.com","isRequired":true},{"id":"inputs-input-1","type":"input","label":"Target Tenant URL","order":1,"values":null,"options":[],"helpText":"<TENANT_NAME>.<TENANT_REGION>.qlikcloud.com","isRequired":true}],"persistData":"no"},{"id":"0B56904B-F3BE-46E4-9BF3-F2DBADAA5271","type":"EndpointBlock","disabled":false,"name":"listTermsByGlossary","displayName":"Qlik Cloud Services - List Terms By Glossary","comment":"Retrieve a list of all target customer tenants defined in the ISV Configuration Database","childId":"94D684DF-6343-4E78-A5E8-F1B08DF811F4","inputs":[{"id":"33887aa0-5630-11ee-be89-01948642bdbb","value":"55550b77-c9f5-4c2a-9c09-63a7f572acca","type":"string","displayValue":"ISV Configuration Database","structure":[]}],"settings":[{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":-582,"y":676,"loopBlockId":null,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"33758560-5630-11ee-b86b-d9ef817cf95b","endpoint_role":"list"},{"id":"94D684DF-6343-4E78-A5E8-F1B08DF811F4","type":"FilterListBlock","disabled":false,"name":"filterList","displayName":"Filter over Qlik Cloud Services - List Terms By Glossary - Filter List","comment":"Retrieve app IDs for the current target customer tenant","childId":"46BBC9D8-D68C-4DA0-8EAD-74FDB6A923DA","inputs":[{"id":"list","value":"{ $.listTermsByGlossary }","type":"string","structure":[]},{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"description","input2":"{ $.inputs.'Target Tenant URL' }","operator":"="}]},"type":"custom","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":234,"y":1210,"loopBlockId":null},{"id":"46BBC9D8-D68C-4DA0-8EAD-74FDB6A923DA","type":"ForEachBlock","disabled":false,"name":"loop","displayName":"Loop","comment":"Iterate over the app IDs of the template apps associated with the current target tenant","childId":"E44EF948-5FC2-4F28-ADBF-F56E7C22A69E","inputs":[{"id":"input","value":"{ $.filterList[0].tags }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-159,"y":1277,"loopBlockId":"EB5C8EA7-07C6-4ED9-B3B1-735F9539ED6F"},{"id":"E44EF948-5FC2-4F28-ADBF-F56E7C22A69E","type":"CallWidgetBlock","disabled":false,"name":"callAutomation","displayName":"4. Reload and Publish Apps - Call Automation","comment":"","childId":null,"inputs":[{"id":"guid","value":"ad75f0f1-9900-47af-aeb3-a1f148182492","type":"api-search","displayValue":"4. Reload and Publish Apps","structure":[]},{"id":"widgetInputs","value":[{"key":"Target Tenant URL","value":"{ $.inputs.'Target Tenant URL' }"}],"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":null,"type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-497,"y":1381},{"id":"8082D022-543C-40D0-90A6-E06CED653D17","type":"ShowBlock","disabled":false,"name":"output","displayName":"Output","comment":"Show a success message once the template app has been uploaded to the 'Staging' shared space in the target tenant","childId":null,"inputs":[{"id":"input","value":"Import app for {$.importAppFromBase64EncodedFile.attributes.name} succeeded!","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-1414,"y":990}],"variables":[{"guid":"69797A6E-B4F4-4A01-861D-D66EDC886835","name":"managedSpaceName","type":"string"},{"guid":"FCE8143B-38AC-405D-8326-0E11AD08AF36","name":"sharedSpaceName","type":"string"}]}